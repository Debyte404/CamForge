#pragma once
/**
 * @file lut_tables.hpp
 * @brief Pre-computed Lookup Tables for ESP32-S3 HPC Filters
 * 
 * GENERATED BY: convert.py
 * DO NOT EDIT MANUALLY!
 * 
 * HARDWARE OPTIMIZATION:
 * - All tables are constexpr (stored in flash, not SRAM)
 * - Replaces runtime multiplication with table lookup
 * - Each LUT trades flash space for CPU cycles
 * 
 * MEMORY USAGE:
 * - Grayscale LUTs: 768 bytes (3 x 256)
 * - Sepia LUTs: 2304 bytes (9 x 256)
 * - Total: ~3KB flash
 */

#include <stdint.h>

// Compiler optimization hints
#ifndef IRAM_ATTR
    #define IRAM_ATTR __attribute__((section(".iram1")))
#endif
#define FORCEINLINE __inline__ __attribute__((always_inline))

namespace lut {


// GRAY_LUT_R: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t GRAY_LUT_R[256] = {
      0,   0,   0,   0,   1,   1,   1,   2,   2,   2,   3,   3,   3,   3,   4,   4,
      4,   5,   5,   5,   6,   6,   6,   6,   7,   7,   7,   8,   8,   8,   9,   9,
      9,   9,  10,  10,  10,  11,  11,  11,  12,  12,  12,  12,  13,  13,  13,  14,
     14,  14,  15,  15,  15,  15,  16,  16,  16,  17,  17,  17,  18,  18,  18,  18,
     19,  19,  19,  20,  20,  20,  21,  21,  21,  21,  22,  22,  22,  23,  23,  23,
     24,  24,  24,  24,  25,  25,  25,  26,  26,  26,  27,  27,  27,  27,  28,  28,
     28,  29,  29,  29,  30,  30,  30,  30,  31,  31,  31,  32,  32,  32,  33,  33,
     33,  33,  34,  34,  34,  35,  35,  35,  36,  36,  36,  36,  37,  37,  37,  38,
     38,  38,  39,  39,  39,  40,  40,  40,  40,  41,  41,  41,  42,  42,  42,  43,
     43,  43,  43,  44,  44,  44,  45,  45,  45,  46,  46,  46,  46,  47,  47,  47,
     48,  48,  48,  49,  49,  49,  49,  50,  50,  50,  51,  51,  51,  52,  52,  52,
     52,  53,  53,  53,  54,  54,  54,  55,  55,  55,  55,  56,  56,  56,  57,  57,
     57,  58,  58,  58,  58,  59,  59,  59,  60,  60,  60,  61,  61,  61,  61,  62,
     62,  62,  63,  63,  63,  64,  64,  64,  64,  65,  65,  65,  66,  66,  66,  67,
     67,  67,  67,  68,  68,  68,  69,  69,  69,  70,  70,  70,  70,  71,  71,  71,
     72,  72,  72,  73,  73,  73,  73,  74,  74,  74,  75,  75,  75,  76,  76,  76
};

// GRAY_LUT_G: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t GRAY_LUT_G[256] = {
      0,   0,   1,   1,   2,   2,   3,   4,   4,   5,   5,   6,   7,   7,   8,   8,
      9,   9,  10,  11,  11,  12,  12,  13,  14,  14,  15,  15,  16,  16,  17,  18,
     18,  19,  19,  20,  21,  21,  22,  22,  23,  24,  24,  25,  25,  26,  26,  27,
     28,  28,  29,  29,  30,  31,  31,  32,  32,  33,  33,  34,  35,  35,  36,  36,
     37,  38,  38,  39,  39,  40,  41,  41,  42,  42,  43,  43,  44,  45,  45,  46,
     46,  47,  48,  48,  49,  49,  50,  50,  51,  52,  52,  53,  53,  54,  55,  55,
     56,  56,  57,  58,  58,  59,  59,  60,  60,  61,  62,  62,  63,  63,  64,  65,
     65,  66,  66,  67,  67,  68,  69,  69,  70,  70,  71,  72,  72,  73,  73,  74,
     75,  75,  76,  76,  77,  77,  78,  79,  79,  80,  80,  81,  82,  82,  83,  83,
     84,  84,  85,  86,  86,  87,  87,  88,  89,  89,  90,  90,  91,  91,  92,  93,
     93,  94,  94,  95,  96,  96,  97,  97,  98,  99,  99, 100, 100, 101, 101, 102,
    103, 103, 104, 104, 105, 106, 106, 107, 107, 108, 108, 109, 110, 110, 111, 111,
    112, 113, 113, 114, 114, 115, 116, 116, 117, 117, 118, 118, 119, 120, 120, 121,
    121, 122, 123, 123, 124, 124, 125, 125, 126, 127, 127, 128, 128, 129, 130, 130,
    131, 131, 132, 133, 133, 134, 134, 135, 135, 136, 137, 137, 138, 138, 139, 140,
    140, 141, 141, 142, 142, 143, 144, 144, 145, 145, 146, 147, 147, 148, 148, 149
};

// GRAY_LUT_B: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t GRAY_LUT_B[256] = {
      0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   1,   1,   1,   1,   1,   1,
      1,   1,   2,   2,   2,   2,   2,   2,   2,   2,   2,   3,   3,   3,   3,   3,
      3,   3,   3,   3,   4,   4,   4,   4,   4,   4,   4,   4,   4,   5,   5,   5,
      5,   5,   5,   5,   5,   6,   6,   6,   6,   6,   6,   6,   6,   6,   7,   7,
      7,   7,   7,   7,   7,   7,   7,   8,   8,   8,   8,   8,   8,   8,   8,   8,
      9,   9,   9,   9,   9,   9,   9,   9,   9,  10,  10,  10,  10,  10,  10,  10,
     10,  10,  11,  11,  11,  11,  11,  11,  11,  11,  12,  12,  12,  12,  12,  12,
     12,  12,  12,  13,  13,  13,  13,  13,  13,  13,  13,  13,  14,  14,  14,  14,
     14,  14,  14,  14,  14,  15,  15,  15,  15,  15,  15,  15,  15,  15,  16,  16,
     16,  16,  16,  16,  16,  16,  16,  17,  17,  17,  17,  17,  17,  17,  17,  18,
     18,  18,  18,  18,  18,  18,  18,  18,  19,  19,  19,  19,  19,  19,  19,  19,
     19,  20,  20,  20,  20,  20,  20,  20,  20,  20,  21,  21,  21,  21,  21,  21,
     21,  21,  21,  22,  22,  22,  22,  22,  22,  22,  22,  22,  23,  23,  23,  23,
     23,  23,  23,  23,  24,  24,  24,  24,  24,  24,  24,  24,  24,  25,  25,  25,
     25,  25,  25,  25,  25,  25,  26,  26,  26,  26,  26,  26,  26,  26,  26,  27,
     27,  27,  27,  27,  27,  27,  27,  27,  28,  28,  28,  28,  28,  28,  28,  28
};

// SEPIA_LUT_RR: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t SEPIA_LUT_RR[256] = {
      0,   0,   0,   1,   1,   1,   2,   2,   3,   3,   3,   4,   4,   5,   5,   5,
      6,   6,   7,   7,   7,   8,   8,   8,   9,   9,  10,  10,  10,  11,  11,  12,
     12,  12,  13,  13,  14,  14,  14,  15,  15,  16,  16,  16,  17,  17,  17,  18,
     18,  19,  19,  19,  20,  20,  21,  21,  21,  22,  22,  23,  23,  23,  24,  24,
     25,  25,  25,  26,  26,  26,  27,  27,  28,  28,  28,  29,  29,  30,  30,  30,
     31,  31,  32,  32,  32,  33,  33,  33,  34,  34,  35,  35,  35,  36,  36,  37,
     37,  37,  38,  38,  39,  39,  39,  40,  40,  41,  41,  41,  42,  42,  42,  43,
     43,  44,  44,  44,  45,  45,  46,  46,  46,  47,  47,  48,  48,  48,  49,  49,
     50,  50,  50,  51,  51,  51,  52,  52,  53,  53,  53,  54,  54,  55,  55,  55,
     56,  56,  57,  57,  57,  58,  58,  58,  59,  59,  60,  60,  60,  61,  61,  62,
     62,  62,  63,  63,  64,  64,  64,  65,  65,  66,  66,  66,  67,  67,  67,  68,
     68,  69,  69,  69,  70,  70,  71,  71,  71,  72,  72,  73,  73,  73,  74,  74,
     75,  75,  75,  76,  76,  76,  77,  77,  78,  78,  78,  79,  79,  80,  80,  80,
     81,  81,  82,  82,  82,  83,  83,  83,  84,  84,  85,  85,  85,  86,  86,  87,
     87,  87,  88,  88,  89,  89,  89,  90,  90,  91,  91,  91,  92,  92,  92,  93,
     93,  94,  94,  94,  95,  95,  96,  96,  96,  97,  97,  98,  98,  98,  99,  99
};

// SEPIA_LUT_RG: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t SEPIA_LUT_RG[256] = {
      0,   0,   1,   2,   3,   3,   4,   5,   6,   6,   7,   8,   9,   9,  10,  11,
     12,  13,  13,  14,  15,  16,  16,  17,  18,  19,  19,  20,  21,  22,  22,  23,
     24,  25,  26,  26,  27,  28,  29,  29,  30,  31,  32,  32,  33,  34,  35,  35,
     36,  37,  38,  39,  39,  40,  41,  42,  42,  43,  44,  45,  45,  46,  47,  48,
     49,  49,  50,  51,  52,  52,  53,  54,  55,  55,  56,  57,  58,  58,  59,  60,
     61,  62,  62,  63,  64,  65,  65,  66,  67,  68,  68,  69,  70,  71,  71,  72,
     73,  74,  75,  75,  76,  77,  78,  78,  79,  80,  81,  81,  82,  83,  84,  84,
     85,  86,  87,  88,  88,  89,  90,  91,  91,  92,  93,  94,  94,  95,  96,  97,
     98,  98,  99, 100, 101, 101, 102, 103, 104, 104, 105, 106, 107, 107, 108, 109,
    110, 111, 111, 112, 113, 114, 114, 115, 116, 117, 117, 118, 119, 120, 120, 121,
    122, 123, 124, 124, 125, 126, 127, 127, 128, 129, 130, 130, 131, 132, 133, 133,
    134, 135, 136, 137, 137, 138, 139, 140, 140, 141, 142, 143, 143, 144, 145, 146,
    147, 147, 148, 149, 150, 150, 151, 152, 153, 153, 154, 155, 156, 156, 157, 158,
    159, 160, 160, 161, 162, 163, 163, 164, 165, 166, 166, 167, 168, 169, 169, 170,
    171, 172, 173, 173, 174, 175, 176, 176, 177, 178, 179, 179, 180, 181, 182, 182,
    183, 184, 185, 186, 186, 187, 188, 189, 189, 190, 191, 192, 192, 193, 194, 195
};

// SEPIA_LUT_RB: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t SEPIA_LUT_RB[256] = {
      0,   0,   0,   0,   0,   0,   1,   1,   1,   1,   1,   2,   2,   2,   2,   2,
      3,   3,   3,   3,   3,   3,   4,   4,   4,   4,   4,   5,   5,   5,   5,   5,
      6,   6,   6,   6,   6,   6,   7,   7,   7,   7,   7,   8,   8,   8,   8,   8,
      9,   9,   9,   9,   9,   9,  10,  10,  10,  10,  10,  11,  11,  11,  11,  11,
     12,  12,  12,  12,  12,  12,  13,  13,  13,  13,  13,  14,  14,  14,  14,  14,
     15,  15,  15,  15,  15,  15,  16,  16,  16,  16,  16,  17,  17,  17,  17,  17,
     18,  18,  18,  18,  18,  18,  19,  19,  19,  19,  19,  20,  20,  20,  20,  20,
     21,  21,  21,  21,  21,  21,  22,  22,  22,  22,  22,  23,  23,  23,  23,  23,
     24,  24,  24,  24,  24,  24,  25,  25,  25,  25,  25,  26,  26,  26,  26,  26,
     27,  27,  27,  27,  27,  27,  28,  28,  28,  28,  28,  29,  29,  29,  29,  29,
     30,  30,  30,  30,  30,  30,  31,  31,  31,  31,  31,  32,  32,  32,  32,  32,
     33,  33,  33,  33,  33,  33,  34,  34,  34,  34,  34,  35,  35,  35,  35,  35,
     36,  36,  36,  36,  36,  36,  37,  37,  37,  37,  37,  38,  38,  38,  38,  38,
     39,  39,  39,  39,  39,  39,  40,  40,  40,  40,  40,  41,  41,  41,  41,  41,
     42,  42,  42,  42,  42,  42,  43,  43,  43,  43,  43,  44,  44,  44,  44,  44,
     45,  45,  45,  45,  45,  45,  46,  46,  46,  46,  46,  47,  47,  47,  47,  47
};

// SEPIA_LUT_GR: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t SEPIA_LUT_GR[256] = {
      0,   0,   0,   1,   1,   1,   2,   2,   2,   3,   3,   3,   4,   4,   4,   5,
      5,   5,   6,   6,   6,   7,   7,   7,   8,   8,   9,   9,   9,  10,  10,  10,
     11,  11,  11,  12,  12,  12,  13,  13,  13,  14,  14,  14,  15,  15,  15,  16,
     16,  17,  17,  17,  18,  18,  18,  19,  19,  19,  20,  20,  20,  21,  21,  21,
     22,  22,  22,  23,  23,  23,  24,  24,  25,  25,  25,  26,  26,  26,  27,  27,
     27,  28,  28,  28,  29,  29,  29,  30,  30,  30,  31,  31,  31,  32,  32,  33,
     33,  33,  34,  34,  34,  35,  35,  35,  36,  36,  36,  37,  37,  37,  38,  38,
     38,  39,  39,  39,  40,  40,  41,  41,  41,  42,  42,  42,  43,  43,  43,  44,
     44,  44,  45,  45,  45,  46,  46,  46,  47,  47,  47,  48,  48,  49,  49,  49,
     50,  50,  50,  51,  51,  51,  52,  52,  52,  53,  53,  53,  54,  54,  54,  55,
     55,  55,  56,  56,  57,  57,  57,  58,  58,  58,  59,  59,  59,  60,  60,  60,
     61,  61,  61,  62,  62,  62,  63,  63,  63,  64,  64,  65,  65,  65,  66,  66,
     66,  67,  67,  67,  68,  68,  68,  69,  69,  69,  70,  70,  70,  71,  71,  71,
     72,  72,  73,  73,  73,  74,  74,  74,  75,  75,  75,  76,  76,  76,  77,  77,
     77,  78,  78,  78,  79,  79,  79,  80,  80,  81,  81,  81,  82,  82,  82,  83,
     83,  83,  84,  84,  84,  85,  85,  85,  86,  86,  86,  87,  87,  87,  88,  88
};

// SEPIA_LUT_GG: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t SEPIA_LUT_GG[256] = {
      0,   0,   1,   2,   2,   3,   4,   4,   5,   6,   6,   7,   8,   8,   9,  10,
     10,  11,  12,  12,  13,  14,  15,  15,  16,  17,  17,  18,  19,  19,  20,  21,
     21,  22,  23,  23,  24,  25,  25,  26,  27,  28,  28,  29,  30,  30,  31,  32,
     32,  33,  34,  34,  35,  36,  36,  37,  38,  38,  39,  40,  41,  41,  42,  43,
     43,  44,  45,  45,  46,  47,  47,  48,  49,  49,  50,  51,  51,  52,  53,  54,
     54,  55,  56,  56,  57,  58,  58,  59,  60,  60,  61,  62,  62,  63,  64,  64,
     65,  66,  66,  67,  68,  69,  69,  70,  71,  71,  72,  73,  73,  74,  75,  75,
     76,  77,  77,  78,  79,  79,  80,  81,  82,  82,  83,  84,  84,  85,  86,  86,
     87,  88,  88,  89,  90,  90,  91,  92,  92,  93,  94,  95,  95,  96,  97,  97,
     98,  99,  99, 100, 101, 101, 102, 103, 103, 104, 105, 105, 106, 107, 108, 108,
    109, 110, 110, 111, 112, 112, 113, 114, 114, 115, 116, 116, 117, 118, 118, 119,
    120, 120, 121, 122, 123, 123, 124, 125, 125, 126, 127, 127, 128, 129, 129, 130,
    131, 131, 132, 133, 133, 134, 135, 136, 136, 137, 138, 138, 139, 140, 140, 141,
    142, 142, 143, 144, 144, 145, 146, 146, 147, 148, 149, 149, 150, 151, 151, 152,
    153, 153, 154, 155, 155, 156, 157, 157, 158, 159, 159, 160, 161, 162, 162, 163,
    164, 164, 165, 166, 166, 167, 168, 168, 169, 170, 170, 171, 172, 172, 173, 174
};

// SEPIA_LUT_GB: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t SEPIA_LUT_GB[256] = {
      0,   0,   0,   0,   0,   0,   1,   1,   1,   1,   1,   1,   2,   2,   2,   2,
      2,   2,   3,   3,   3,   3,   3,   3,   4,   4,   4,   4,   4,   4,   5,   5,
      5,   5,   5,   5,   6,   6,   6,   6,   6,   6,   7,   7,   7,   7,   7,   7,
      8,   8,   8,   8,   8,   8,   9,   9,   9,   9,   9,   9,  10,  10,  10,  10,
     10,  10,  11,  11,  11,  11,  11,  11,  12,  12,  12,  12,  12,  12,  13,  13,
     13,  13,  13,  13,  14,  14,  14,  14,  14,  14,  15,  15,  15,  15,  15,  15,
     16,  16,  16,  16,  16,  16,  17,  17,  17,  17,  17,  17,  18,  18,  18,  18,
     18,  18,  19,  19,  19,  19,  19,  19,  20,  20,  20,  20,  20,  20,  21,  21,
     21,  21,  21,  22,  22,  22,  22,  22,  22,  23,  23,  23,  23,  23,  23,  24,
     24,  24,  24,  24,  24,  25,  25,  25,  25,  25,  25,  26,  26,  26,  26,  26,
     26,  27,  27,  27,  27,  27,  27,  28,  28,  28,  28,  28,  28,  29,  29,  29,
     29,  29,  29,  30,  30,  30,  30,  30,  30,  31,  31,  31,  31,  31,  31,  32,
     32,  32,  32,  32,  32,  33,  33,  33,  33,  33,  33,  34,  34,  34,  34,  34,
     34,  35,  35,  35,  35,  35,  35,  36,  36,  36,  36,  36,  36,  37,  37,  37,
     37,  37,  37,  38,  38,  38,  38,  38,  38,  39,  39,  39,  39,  39,  39,  40,
     40,  40,  40,  40,  40,  41,  41,  41,  41,  41,  41,  42,  42,  42,  42,  42
};

// SEPIA_LUT_BR: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t SEPIA_LUT_BR[256] = {
      0,   0,   0,   0,   1,   1,   1,   1,   2,   2,   2,   2,   3,   3,   3,   4,
      4,   4,   4,   5,   5,   5,   5,   6,   6,   6,   7,   7,   7,   7,   8,   8,
      8,   8,   9,   9,   9,   9,  10,  10,  10,  11,  11,  11,  11,  12,  12,  12,
     12,  13,  13,  13,  14,  14,  14,  14,  15,  15,  15,  15,  16,  16,  16,  16,
     17,  17,  17,  18,  18,  18,  18,  19,  19,  19,  19,  20,  20,  20,  21,  21,
     21,  21,  22,  22,  22,  22,  23,  23,  23,  23,  24,  24,  24,  25,  25,  25,
     25,  26,  26,  26,  26,  27,  27,  27,  28,  28,  28,  28,  29,  29,  29,  29,
     30,  30,  30,  30,  31,  31,  31,  32,  32,  32,  32,  33,  33,  33,  33,  34,
     34,  34,  35,  35,  35,  35,  36,  36,  36,  36,  37,  37,  37,  38,  38,  38,
     38,  39,  39,  39,  39,  40,  40,  40,  40,  41,  41,  41,  42,  42,  42,  42,
     43,  43,  43,  43,  44,  44,  44,  45,  45,  45,  45,  46,  46,  46,  46,  47,
     47,  47,  47,  48,  48,  48,  49,  49,  49,  49,  50,  50,  50,  50,  51,  51,
     51,  52,  52,  52,  52,  53,  53,  53,  53,  54,  54,  54,  54,  55,  55,  55,
     56,  56,  56,  56,  57,  57,  57,  57,  58,  58,  58,  59,  59,  59,  59,  60,
     60,  60,  60,  61,  61,  61,  61,  62,  62,  62,  63,  63,  63,  63,  64,  64,
     64,  64,  65,  65,  65,  66,  66,  66,  66,  67,  67,  67,  67,  68,  68,  68
};

// SEPIA_LUT_BG: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t SEPIA_LUT_BG[256] = {
      0,   0,   1,   1,   2,   2,   3,   3,   4,   4,   5,   5,   6,   6,   7,   7,
      8,   9,   9,  10,  10,  11,  11,  12,  12,  13,  13,  14,  14,  15,  15,  16,
     17,  17,  18,  18,  19,  19,  20,  20,  21,  21,  22,  22,  23,  23,  24,  24,
     25,  26,  26,  27,  27,  28,  28,  29,  29,  30,  30,  31,  31,  32,  32,  33,
     34,  34,  35,  35,  36,  36,  37,  37,  38,  38,  39,  39,  40,  40,  41,  41,
     42,  43,  43,  44,  44,  45,  45,  46,  46,  47,  47,  48,  48,  49,  49,  50,
     51,  51,  52,  52,  53,  53,  54,  54,  55,  55,  56,  56,  57,  57,  58,  58,
     59,  60,  60,  61,  61,  62,  62,  63,  63,  64,  64,  65,  65,  66,  66,  67,
     68,  68,  69,  69,  70,  70,  71,  71,  72,  72,  73,  73,  74,  74,  75,  75,
     76,  77,  77,  78,  78,  79,  79,  80,  80,  81,  81,  82,  82,  83,  83,  84,
     85,  85,  86,  86,  87,  87,  88,  88,  89,  89,  90,  90,  91,  91,  92,  92,
     93,  94,  94,  95,  95,  96,  96,  97,  97,  98,  98,  99,  99, 100, 100, 101,
    102, 102, 103, 103, 104, 104, 105, 105, 106, 106, 107, 107, 108, 108, 109, 109,
    110, 111, 111, 112, 112, 113, 113, 114, 114, 115, 115, 116, 116, 117, 117, 118,
    119, 119, 120, 120, 121, 121, 122, 122, 123, 123, 124, 124, 125, 125, 126, 126,
    127, 128, 128, 129, 129, 130, 130, 131, 131, 132, 132, 133, 133, 134, 134, 135
};

// SEPIA_LUT_BB: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t SEPIA_LUT_BB[256] = {
      0,   0,   0,   0,   0,   0,   0,   0,   1,   1,   1,   1,   1,   1,   1,   1,
      2,   2,   2,   2,   2,   2,   2,   2,   3,   3,   3,   3,   3,   3,   3,   3,
      4,   4,   4,   4,   4,   4,   4,   5,   5,   5,   5,   5,   5,   5,   5,   6,
      6,   6,   6,   6,   6,   6,   6,   7,   7,   7,   7,   7,   7,   7,   7,   8,
      8,   8,   8,   8,   8,   8,   9,   9,   9,   9,   9,   9,   9,   9,  10,  10,
     10,  10,  10,  10,  10,  10,  11,  11,  11,  11,  11,  11,  11,  11,  12,  12,
     12,  12,  12,  12,  12,  13,  13,  13,  13,  13,  13,  13,  13,  14,  14,  14,
     14,  14,  14,  14,  14,  15,  15,  15,  15,  15,  15,  15,  15,  16,  16,  16,
     16,  16,  16,  16,  17,  17,  17,  17,  17,  17,  17,  17,  18,  18,  18,  18,
     18,  18,  18,  18,  19,  19,  19,  19,  19,  19,  19,  19,  20,  20,  20,  20,
     20,  20,  20,  21,  21,  21,  21,  21,  21,  21,  21,  22,  22,  22,  22,  22,
     22,  22,  22,  23,  23,  23,  23,  23,  23,  23,  23,  24,  24,  24,  24,  24,
     24,  24,  25,  25,  25,  25,  25,  25,  25,  25,  26,  26,  26,  26,  26,  26,
     26,  26,  27,  27,  27,  27,  27,  27,  27,  27,  28,  28,  28,  28,  28,  28,
     28,  29,  29,  29,  29,  29,  29,  29,  29,  30,  30,  30,  30,  30,  30,  30,
     30,  31,  31,  31,  31,  31,  31,  31,  31,  32,  32,  32,  32,  32,  32,  32
};

// GAMMA_LUT_22: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t GAMMA_LUT_22[256] = {
      0,  21,  28,  34,  39,  43,  46,  50,  53,  56,  59,  61,  64,  66,  68,  70,
     72,  74,  76,  78,  80,  82,  84,  85,  87,  89,  90,  92,  93,  95,  96,  98,
     99, 101, 102, 103, 105, 106, 107, 109, 110, 111, 112, 114, 115, 116, 117, 118,
    119, 120, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135,
    136, 137, 138, 139, 140, 141, 142, 143, 144, 144, 145, 146, 147, 148, 149, 150,
    151, 151, 152, 153, 154, 155, 156, 156, 157, 158, 159, 160, 160, 161, 162, 163,
    164, 164, 165, 166, 167, 167, 168, 169, 170, 170, 171, 172, 173, 173, 174, 175,
    175, 176, 177, 178, 178, 179, 180, 180, 181, 182, 182, 183, 184, 184, 185, 186,
    186, 187, 188, 188, 189, 190, 190, 191, 192, 192, 193, 194, 194, 195, 195, 196,
    197, 197, 198, 199, 199, 200, 200, 201, 202, 202, 203, 203, 204, 205, 205, 206,
    206, 207, 207, 208, 209, 209, 210, 210, 211, 212, 212, 213, 213, 214, 214, 215,
    215, 216, 217, 217, 218, 218, 219, 219, 220, 220, 221, 221, 222, 223, 223, 224,
    224, 225, 225, 226, 226, 227, 227, 228, 228, 229, 229, 230, 230, 231, 231, 232,
    232, 233, 233, 234, 234, 235, 235, 236, 236, 237, 237, 238, 238, 239, 239, 240,
    240, 241, 241, 242, 242, 243, 243, 244, 244, 245, 245, 246, 246, 247, 247, 248,
    248, 249, 249, 249, 250, 250, 251, 251, 252, 252, 253, 253, 254, 254, 255, 255
};

// GAMMA_LUT_INV: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t GAMMA_LUT_INV[256] = {
      0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1,
      1,   1,   1,   1,   1,   1,   1,   1,   1,   2,   2,   2,   2,   2,   2,   2,
      3,   3,   3,   3,   3,   4,   4,   4,   4,   5,   5,   5,   5,   6,   6,   6,
      6,   7,   7,   7,   8,   8,   8,   9,   9,   9,  10,  10,  11,  11,  11,  12,
     12,  13,  13,  13,  14,  14,  15,  15,  16,  16,  17,  17,  18,  18,  19,  19,
     20,  20,  21,  22,  22,  23,  23,  24,  25,  25,  26,  26,  27,  28,  28,  29,
     30,  30,  31,  32,  33,  33,  34,  35,  35,  36,  37,  38,  39,  39,  40,  41,
     42,  43,  43,  44,  45,  46,  47,  48,  49,  49,  50,  51,  52,  53,  54,  55,
     56,  57,  58,  59,  60,  61,  62,  63,  64,  65,  66,  67,  68,  69,  70,  71,
     73,  74,  75,  76,  77,  78,  79,  81,  82,  83,  84,  85,  87,  88,  89,  90,
     91,  93,  94,  95,  97,  98,  99, 100, 102, 103, 105, 106, 107, 109, 110, 111,
    113, 114, 116, 117, 119, 120, 121, 123, 124, 126, 127, 129, 130, 132, 133, 135,
    137, 138, 140, 141, 143, 145, 146, 148, 149, 151, 153, 154, 156, 158, 159, 161,
    163, 165, 166, 168, 170, 172, 173, 175, 177, 179, 181, 182, 184, 186, 188, 190,
    192, 194, 196, 197, 199, 201, 203, 205, 207, 209, 211, 213, 215, 217, 219, 221,
    223, 225, 227, 229, 231, 234, 236, 238, 240, 242, 244, 246, 248, 251, 253, 255
};

// VIGNETTE_LUT: 128 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t VIGNETTE_LUT[128] = {
    255, 232, 223, 216, 210, 205, 200, 195, 191, 187, 184, 180, 177, 174, 171, 168,
    165, 162, 159, 157, 154, 152, 149, 147, 145, 142, 140, 138, 136, 134, 132, 130,
    128, 126, 124, 122, 120, 118, 116, 114, 112, 111, 109, 107, 105, 104, 102, 100,
     99,  97,  96,  94,  92,  91,  89,  88,  86,  85,  83,  82,  80,  79,  78,  76,
     75,  73,  72,  71,  69,  68,  66,  65,  64,  62,  61,  60,  59,  57,  56,  55,
     53,  52,  51,  50,  48,  47,  46,  45,  44,  42,  41,  40,  39,  38,  36,  35,
     34,  33,  32,  31,  30,  28,  27,  26,  25,  24,  23,  22,  21,  20,  19,  18,
     16,  15,  14,  13,  12,  11,  10,   9,   8,   7,   6,   5,   4,   3,   2,   1
};

// RGB565_R_PACK: 256 entries, uint16_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint16_t RGB565_R_PACK[256] = {
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0800, 0x0800, 0x0800, 0x0800, 0x0800, 0x0800, 0x0800, 0x0800,
    0x1000, 0x1000, 0x1000, 0x1000, 0x1000, 0x1000, 0x1000, 0x1000, 0x1800, 0x1800, 0x1800, 0x1800, 0x1800, 0x1800, 0x1800, 0x1800,
    0x2000, 0x2000, 0x2000, 0x2000, 0x2000, 0x2000, 0x2000, 0x2000, 0x2800, 0x2800, 0x2800, 0x2800, 0x2800, 0x2800, 0x2800, 0x2800,
    0x3000, 0x3000, 0x3000, 0x3000, 0x3000, 0x3000, 0x3000, 0x3000, 0x3800, 0x3800, 0x3800, 0x3800, 0x3800, 0x3800, 0x3800, 0x3800,
    0x4000, 0x4000, 0x4000, 0x4000, 0x4000, 0x4000, 0x4000, 0x4000, 0x4800, 0x4800, 0x4800, 0x4800, 0x4800, 0x4800, 0x4800, 0x4800,
    0x5000, 0x5000, 0x5000, 0x5000, 0x5000, 0x5000, 0x5000, 0x5000, 0x5800, 0x5800, 0x5800, 0x5800, 0x5800, 0x5800, 0x5800, 0x5800,
    0x6000, 0x6000, 0x6000, 0x6000, 0x6000, 0x6000, 0x6000, 0x6000, 0x6800, 0x6800, 0x6800, 0x6800, 0x6800, 0x6800, 0x6800, 0x6800,
    0x7000, 0x7000, 0x7000, 0x7000, 0x7000, 0x7000, 0x7000, 0x7000, 0x7800, 0x7800, 0x7800, 0x7800, 0x7800, 0x7800, 0x7800, 0x7800,
    0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8800, 0x8800, 0x8800, 0x8800, 0x8800, 0x8800, 0x8800, 0x8800,
    0x9000, 0x9000, 0x9000, 0x9000, 0x9000, 0x9000, 0x9000, 0x9000, 0x9800, 0x9800, 0x9800, 0x9800, 0x9800, 0x9800, 0x9800, 0x9800,
    0xA000, 0xA000, 0xA000, 0xA000, 0xA000, 0xA000, 0xA000, 0xA000, 0xA800, 0xA800, 0xA800, 0xA800, 0xA800, 0xA800, 0xA800, 0xA800,
    0xB000, 0xB000, 0xB000, 0xB000, 0xB000, 0xB000, 0xB000, 0xB000, 0xB800, 0xB800, 0xB800, 0xB800, 0xB800, 0xB800, 0xB800, 0xB800,
    0xC000, 0xC000, 0xC000, 0xC000, 0xC000, 0xC000, 0xC000, 0xC000, 0xC800, 0xC800, 0xC800, 0xC800, 0xC800, 0xC800, 0xC800, 0xC800,
    0xD000, 0xD000, 0xD000, 0xD000, 0xD000, 0xD000, 0xD000, 0xD000, 0xD800, 0xD800, 0xD800, 0xD800, 0xD800, 0xD800, 0xD800, 0xD800,
    0xE000, 0xE000, 0xE000, 0xE000, 0xE000, 0xE000, 0xE000, 0xE000, 0xE800, 0xE800, 0xE800, 0xE800, 0xE800, 0xE800, 0xE800, 0xE800,
    0xF000, 0xF000, 0xF000, 0xF000, 0xF000, 0xF000, 0xF000, 0xF000, 0xF800, 0xF800, 0xF800, 0xF800, 0xF800, 0xF800, 0xF800, 0xF800
};

// RGB565_G_PACK: 256 entries, uint16_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint16_t RGB565_G_PACK[256] = {
    0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x0020, 0x0020, 0x0020, 0x0040, 0x0040, 0x0040, 0x0040, 0x0060, 0x0060, 0x0060, 0x0060,
    0x0080, 0x0080, 0x0080, 0x0080, 0x00A0, 0x00A0, 0x00A0, 0x00A0, 0x00C0, 0x00C0, 0x00C0, 0x00C0, 0x00E0, 0x00E0, 0x00E0, 0x00E0,
    0x0100, 0x0100, 0x0100, 0x0100, 0x0120, 0x0120, 0x0120, 0x0120, 0x0140, 0x0140, 0x0140, 0x0140, 0x0160, 0x0160, 0x0160, 0x0160,
    0x0180, 0x0180, 0x0180, 0x0180, 0x01A0, 0x01A0, 0x01A0, 0x01A0, 0x01C0, 0x01C0, 0x01C0, 0x01C0, 0x01E0, 0x01E0, 0x01E0, 0x01E0,
    0x0200, 0x0200, 0x0200, 0x0200, 0x0220, 0x0220, 0x0220, 0x0220, 0x0240, 0x0240, 0x0240, 0x0240, 0x0260, 0x0260, 0x0260, 0x0260,
    0x0280, 0x0280, 0x0280, 0x0280, 0x02A0, 0x02A0, 0x02A0, 0x02A0, 0x02C0, 0x02C0, 0x02C0, 0x02C0, 0x02E0, 0x02E0, 0x02E0, 0x02E0,
    0x0300, 0x0300, 0x0300, 0x0300, 0x0320, 0x0320, 0x0320, 0x0320, 0x0340, 0x0340, 0x0340, 0x0340, 0x0360, 0x0360, 0x0360, 0x0360,
    0x0380, 0x0380, 0x0380, 0x0380, 0x03A0, 0x03A0, 0x03A0, 0x03A0, 0x03C0, 0x03C0, 0x03C0, 0x03C0, 0x03E0, 0x03E0, 0x03E0, 0x03E0,
    0x0400, 0x0400, 0x0400, 0x0400, 0x0420, 0x0420, 0x0420, 0x0420, 0x0440, 0x0440, 0x0440, 0x0440, 0x0460, 0x0460, 0x0460, 0x0460,
    0x0480, 0x0480, 0x0480, 0x0480, 0x04A0, 0x04A0, 0x04A0, 0x04A0, 0x04C0, 0x04C0, 0x04C0, 0x04C0, 0x04E0, 0x04E0, 0x04E0, 0x04E0,
    0x0500, 0x0500, 0x0500, 0x0500, 0x0520, 0x0520, 0x0520, 0x0520, 0x0540, 0x0540, 0x0540, 0x0540, 0x0560, 0x0560, 0x0560, 0x0560,
    0x0580, 0x0580, 0x0580, 0x0580, 0x05A0, 0x05A0, 0x05A0, 0x05A0, 0x05C0, 0x05C0, 0x05C0, 0x05C0, 0x05E0, 0x05E0, 0x05E0, 0x05E0,
    0x0600, 0x0600, 0x0600, 0x0600, 0x0620, 0x0620, 0x0620, 0x0620, 0x0640, 0x0640, 0x0640, 0x0640, 0x0660, 0x0660, 0x0660, 0x0660,
    0x0680, 0x0680, 0x0680, 0x0680, 0x06A0, 0x06A0, 0x06A0, 0x06A0, 0x06C0, 0x06C0, 0x06C0, 0x06C0, 0x06E0, 0x06E0, 0x06E0, 0x06E0,
    0x0700, 0x0700, 0x0700, 0x0700, 0x0720, 0x0720, 0x0720, 0x0720, 0x0740, 0x0740, 0x0740, 0x0740, 0x0760, 0x0760, 0x0760, 0x0760,
    0x0780, 0x0780, 0x0780, 0x0780, 0x07A0, 0x07A0, 0x07A0, 0x07A0, 0x07C0, 0x07C0, 0x07C0, 0x07C0, 0x07E0, 0x07E0, 0x07E0, 0x07E0
};

// RGB565_B_PACK: 256 entries, uint8_t
// HARDWARE: Stored in flash (constexpr) to save SRAM
static constexpr uint8_t RGB565_B_PACK[256] = {
      0,   0,   0,   0,   0,   0,   0,   0,   1,   1,   1,   1,   1,   1,   1,   1,
      2,   2,   2,   2,   2,   2,   2,   2,   3,   3,   3,   3,   3,   3,   3,   3,
      4,   4,   4,   4,   4,   4,   4,   4,   5,   5,   5,   5,   5,   5,   5,   5,
      6,   6,   6,   6,   6,   6,   6,   6,   7,   7,   7,   7,   7,   7,   7,   7,
      8,   8,   8,   8,   8,   8,   8,   8,   9,   9,   9,   9,   9,   9,   9,   9,
     10,  10,  10,  10,  10,  10,  10,  10,  11,  11,  11,  11,  11,  11,  11,  11,
     12,  12,  12,  12,  12,  12,  12,  12,  13,  13,  13,  13,  13,  13,  13,  13,
     14,  14,  14,  14,  14,  14,  14,  14,  15,  15,  15,  15,  15,  15,  15,  15,
     16,  16,  16,  16,  16,  16,  16,  16,  17,  17,  17,  17,  17,  17,  17,  17,
     18,  18,  18,  18,  18,  18,  18,  18,  19,  19,  19,  19,  19,  19,  19,  19,
     20,  20,  20,  20,  20,  20,  20,  20,  21,  21,  21,  21,  21,  21,  21,  21,
     22,  22,  22,  22,  22,  22,  22,  22,  23,  23,  23,  23,  23,  23,  23,  23,
     24,  24,  24,  24,  24,  24,  24,  24,  25,  25,  25,  25,  25,  25,  25,  25,
     26,  26,  26,  26,  26,  26,  26,  26,  27,  27,  27,  27,  27,  27,  27,  27,
     28,  28,  28,  28,  28,  28,  28,  28,  29,  29,  29,  29,  29,  29,  29,  29,
     30,  30,  30,  30,  30,  30,  30,  30,  31,  31,  31,  31,  31,  31,  31,  31
};


/**
 * @brief SIMD-optimized grayscale filter using LUT
 * HARDWARE: Uses pre-computed LUT (no multiply), unrolled loop
 * 
 * @param pixels Pointer to RGB565 pixel data
 * @param count Number of pixels (should be multiple of 8)
 */
static FORCEINLINE void IRAM_ATTR filter_grayscale_lut(uint16_t* pixels, int count) {
    const int aligned = count & ~7;  // Process 8 at a time
    
    #pragma GCC unroll 8
    for (int i = 0; i < aligned; i++) {
        // Extract RGB from RGB565
        uint8_t r = (pixels[i] >> 8) & 0xF8;
        uint8_t g = (pixels[i] >> 3) & 0xFC;
        uint8_t b = (pixels[i] << 3) & 0xF8;
        
        // LUT-based grayscale (3 memory reads, 2 adds, no multiply!)
        uint8_t gray = GRAY_LUT_R[r] + GRAY_LUT_G[g] + GRAY_LUT_B[b];
        
        // Pack back to RGB565
        pixels[i] = (gray & 0xF8) << 8 | (gray & 0xFC) << 3 | (gray >> 3);
    }
    
    // Handle remainder (same logic, no unroll)
    for (int i = aligned; i < count; i++) {
        uint8_t r = (pixels[i] >> 8) & 0xF8;
        uint8_t g = (pixels[i] >> 3) & 0xFC;
        uint8_t b = (pixels[i] << 3) & 0xF8;
        uint8_t gray = GRAY_LUT_R[r] + GRAY_LUT_G[g] + GRAY_LUT_B[b];
        pixels[i] = (gray & 0xF8) << 8 | (gray & 0xFC) << 3 | (gray >> 3);
    }
}


/**
 * @brief SIMD-optimized sepia filter using LUT
 * HARDWARE: 9-way LUT lookup replaces 9 multiplications
 * 
 * @param pixels Pointer to RGB565 pixel data
 * @param count Number of pixels
 */
static FORCEINLINE void IRAM_ATTR filter_sepia_lut(uint16_t* pixels, int count) {
    #pragma GCC unroll 4
    for (int i = 0; i < count; i++) {
        // Extract RGB
        uint8_t r = (pixels[i] >> 8) & 0xF8;
        uint8_t g = (pixels[i] >> 3) & 0xFC;
        uint8_t b = (pixels[i] << 3) & 0xF8;
        
        // Matrix multiply via LUT lookups (9 reads + 6 adds vs 9 muls)
        int tr = SEPIA_LUT_RR[r] + SEPIA_LUT_RG[g] + SEPIA_LUT_RB[b];
        int tg = SEPIA_LUT_GR[r] + SEPIA_LUT_GG[g] + SEPIA_LUT_GB[b];
        int tb = SEPIA_LUT_BR[r] + SEPIA_LUT_BG[g] + SEPIA_LUT_BB[b];
        
        // Saturate to 255
        r = tr > 255 ? 255 : tr;
        g = tg > 255 ? 255 : tg;
        b = tb > 255 ? 255 : tb;
        
        // Pack back
        pixels[i] = (r & 0xF8) << 8 | (g & 0xFC) << 3 | (b >> 3);
    }
}


} // namespace lut
